<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MatchScore Dashboard</title>
</head>
<style>
    #topBar {
        display: flex;
        justify-content: space-between;
        align-items: center; 
        padding: 10px;
        background-color: #f8f8f8; 
        box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1); 
    }

    #userDetails {
        display: flex;
        align-items: center;
    }

    #userDetails img {
        margin-left: 10px;
        height: 50px;
        width: 50px;
        border-radius: 50%; 
    }

    .buttons-container {
        display: flex;
        align-items: center;
    }

    .topbar-button {
        height: 50px;
        margin-right: 10px;
    }

    /* New container for main content */
    #mainContainer {
        display: flex;
        height: calc(100vh - 60px); /* Adjust based on the height of the top bar */
        margin-top: 10px; /* Optional: adds some space below the top bar */
    }

    /* Style for the dashboard section */
    #dashboard, #focus {
        flex: 1; /* Flexbox handles the width */
        padding: 10px;
        overflow-y: auto;
    }

    #dashboard {
        margin-right: 10px; /* Right margin only for dashboard */
    }

    /* Style for the buttons in the dashboard */
    .dashboard-button, .dashboard-button:link, .dashboard-button:visited, .dashboard-form .dashboard-button {
        display: block;
        margin-bottom: 10px;
        padding: 8px 15px;
        background-color: #007bff;
        color: white;
        text-align: center;
        text-decoration: none;
        border-radius: 4px;
        transition: background-color 0.3s ease;
        justify-content: space-between;
    }

    #dashboard h2, {
        margin-bottom: 20px; /* Add some space below the heading */
    }

    .dashboard-buttons-container {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        flex-grow: 1; /* Ensures it takes up available space */
    }

    .dashboard-button:hover {
        background-color: #0056b3;
    }

    /* Style for warning messages */
    .warning-message {
        color: red;
        margin-bottom: 10px;
    }

    /* Style for the right-hand content area */
    
</style>
</head>
<body>
    <div id="topBar">
        <!-- Buttons on the left -->
        <div class="buttons-container">
            <button class="topbar-button" onclick="location.href='/'">Main Page (Logout)</button>
        </div>

        <!-- User details on the right -->
        <div id="userDetails">
            <span>{{ name }}</span>
            <img src="{{ image_data_url }}" alt="User Image">
        </div>  
    </div>
    <div id="dashboard">
        <h2>Dashboard</h2>
        {% if user_role == 'player' %}
            <a href="/users/accountmanagement" class="dashboard-button">Manage your profile</a>
            {% if player_id %}
            <a href="/players/accountmanagement" class="dashboard-button">Manage player profile</a>
            {% endif %}
            <a href="/users/request" class="dashboard-button">Make  a request</a>
            {% if request_response %}
                {{ request_response}}
            {% endif %}
        {% endif %}

        {% if user_role == 'director' %}
            <a href="/users/accountmanagement" class="dashboard-button">Manage your profile</a>
            <a href="/users/request" class="dashboard-button">Make  a request</a>
            <a href="/tournaments/create_tournament_form" class="dashboard-button">Create a tournament</a>
        {% endif %}

        {% if user_role == 'club_manager' %}
            <a href="/users/accountmanagement" class="dashboard-button">Manage your profile</a>
            {% if player_id %}
            <a href="/players/accountmanagement" class="dashboard-button">Manage player profile</a>
            {% endif %}
            <a href="/users/request" class="dashboard-button">Make  a request</a>
            <a href="/users/add_players" class="dashboard-button">Add players to club</a>
            <a href="/players/createsingletemplate" class="dashboard-button">Create player</a>
            <form id="addPlayersForm" method="post" class="dashboard-form" action ="/users/addplayerstoclub" >
                <input type="hidden" name="sports_club_id" value="{{ sports_club_id }}">
                <input type="hidden" name="is_sports_club" value={{1}}>
                <input type="hidden" name="player_sport" value="{{ sport }}">
                <button type="submit" class="dashboard-button">Add players to club</button>
            </form>
        {% endif %}

        {% if user_role == 'admin' %}
            <a href="/users/accountmanagement" class="dashboard-button">Manage your profile</a>
            <a href="/players/accountmanagement" class="dashboard-button">Manage player profile</a>
            <a href="/tournaments/create_tournament_form" class="dashboard-button">Create a tournament</a>
            <a href="/users/add_players" class="dashboard-button">Add players to club</a>
            <a href="/players/createsingletemplate" class="dashboard-button">Create player</a>
            <a href="/players/remove" class="dashboard-button">Remove player</a>
            <a href="/users/remove" class="dashboard-button">Delete user</a>
        {% endif %}
    </div>
    <div id="focus">
        <h2>Your Events</h2>
            {% if user_role == 'player' or user_role == 'club_manager' %}
                {% if matches %}
                    <ul id="matches">
                        {% for match in matches%}
                        <li>
                            <h4>Tournament:{{ match[8] }}</h4>
                            <h5>Opponent:{{ match[7] }}</h5>
                            <h5>Scheduled:{{ match[2] }}</h5>
                        </li>
                        {% endfor %}  
                    </ul>              
                {% endif %}
            {% endif %}

            {% if user_role == 'director' %}
                {% if tournaments %}
                    <ul id="tournaments">
                        {% for tournament in tournaments%}
                        <li>
                            <h4>Tournament:{{ tournament.title }}</h4>
                            <h5>Start date:{{ tournament.start_date }}</h5>
                            <h5>End date:{{ tournament.start_date }}</h5>
                            <h5>Format:{{ tournament.format }}</h5>
                        </li>
                        {% endfor %}  
                    </ul>              
                {% endif %}
            {% endif %}

            {% if user_role == 'admin' %}
                {% if pending_requests %}
                    <ul id="pending_requests">
                        {% for request in pending_requests%}
                        <li>
                            <h4>Requestor:{{ request[1] }}</h4>
                            {% if request[2] is not none%}
                            <h5>Request type: link player with id {{request[2]}}</h5>
                            {% endif %}
                            {% if request[3] != 0 %}
                            <h5>Request type: elevate to director</h5>
                            {% endif %}
                            {% if request[4] != 0 %}
                            <h5>Request type: elevate to club manager</h5>
                            {% endif %}
                            <h5>Request details:{{ request[6] }}</h5>
                            <div>
                                <form id="approveRequest" method="post" class="dashboard-form" action ="/users/handlerequest" >
                                    <input type="hidden" name="request_id" value="{{ request[0] }}">
                                    <input type="hidden" name="is_approved" value={{True}}>
                                    <button type="submit" class="dashboard-button">Approve</button>
                                </form>
                                <form id="denyRequest" method="post" class="dashboard-form" action ="/users/handlerequest" >
                                    <input type="hidden" name="request_id" value="{{ request[0] }}">
                                    <input type="hidden" name="is_approved" value={{False}}>
                                    <button type="submit" class="dashboard-button">Deny</button>
                                </form>
                        </li>
                        {% endfor %}  
                    </ul>              
                {% endif %}
            {% endif %}
    <script>
        function showPlayerSearchForm() {
            // Hide the original form
            document.getElementById('addPlayersForm').style.display = 'none';
    
            // Show the new player search form
            document.getElementById('playerSearchForm').style.display = 'block';
        }
    </script>

</body>
</html>